---
import { Image } from "astro:assets";

const {
    title = "Title",
    image = "https://images.pexels.com/photos/635699/pexels-photo-635699.jpeg",
    href,
} = Astro.props;
---

<article>
    {
        image && (
            <Image
                src={image}
                alt={title}
                width={300}
                height={200}
                style={{ objectFit: "cover" }}
            />
        )
    }
    <h2>{title}</h2>
    <div>
        <slot />
        <a href={href}>Read more</a>
    </div>
</article>

<style>
    article {
        position: absolute;
        top: 0;

        left: calc(100% + var(--carousel-item-gap));
        width: var(--carousel-item-width);
        height: var(--carousel-item-height);
        display: grid;
        grid-template-rows: 200px auto 1fr auto;
        gap: 0.25rem;

        padding-block-end: 1rem;
        border-radius: 10px;
        background: light-dark(white, rgba(255 255 255 / 0.05));
        color: light-dark(rgb(49, 65, 88), white);

        will-change: transform;
        animation-name: marquee;
        animation-duration: var(--carousel-duration);
        animation-timing-function: linear;
        animation-iteration-count: infinite;
        animation-delay: calc(
            var(--carousel-duration) / var(--items) * 1 * var(--i) * -1
        );
    }

    /* indexado */
    :global(.carousel > article:nth-child(1)) {
        --i: 0;
    }
    :global(.carousel > article:nth-child(2)) {
        --i: 1;
    }
    :global(.carousel > article:nth-child(3)) {
        --i: 2;
    }
    :global(.carousel > article:nth-child(4)) {
        --i: 3;
    }
    :global(.carousel > article:nth-child(5)) {
        --i: 4;
    }
    :global(.carousel > article:nth-child(6)) {
        --i: 5;
    }
    :global(.carousel > article:nth-child(7)) {
        --i: 6;
    }
    :global(.carousel > article:nth-child(8)) {
        --i: 7;
    }

    img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        border-radius: 10px 10px 0 0;
    }

    article > *:not(img) {
        padding: 0 1rem;
    }

    article > div {
        grid-row: span 2;
        display: grid;
        grid-template-rows: subgrid;
        font-size: 0.8rem;
    }

    h2 {
        font-size: 1.2rem;
        font-weight: 300;
        padding-block: 0.75rem 0.25rem;
        margin: 0;
    }

    p {
        margin: 0;
    }

    a {
        text-decoration: none;
        text-transform: lowercase;
        border: 1px solid var(--clr-cta);
        color: light-dark(var(--clr-cta), white);
        border-radius: 3px;
        padding: 0.25rem 0.5rem;
        place-self: start;
        transition: 150ms ease-in-out;
    }

    a:hover,
    a:focus-visible {
        background-color: var(--clr-cta);
        color: white;
        outline: none;
    }
</style>
