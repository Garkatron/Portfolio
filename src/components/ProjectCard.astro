---
import { Image } from "astro:assets";

const {
    src,
    icons = [],
    title = "",
    description = "Nothing to say about it.",
} = Astro.props;
---

<div class="project-container card">
    <div class="card-inner">
        <div class="card-front">
            <img class="main-project" src={src} alt="Project preview" />

            <div class="project-icons">
                {
                    icons.map((icon) => (
                        <Image
                            width={42}
                            height={42}
                            src={icon.src}
                            alt={icon.alt || "Tech icon"}
                        />
                    ))
                }
            </div>
        </div>
        <div class="card-back has-comic-border">
            <h5 class="title is-5">{title}</h5>
            {description}
        </div>
    </div>
</div>

<style>
    .card {
        width: 290px;
        height: 290px;
        margin: 2rem auto;
        perspective: 1000px;
        cursor: pointer;
    }
    @media (max-width: 1200px) {
        .card {
            width: 190px;
            height: 190px;
        }

        .project-container img.main-project {
            height: 200px;
        }

        .project-container .project-icons img {
            width: 36px;
            height: 36px;
        }
    }

    @media (max-width: 768px) {
        .card {
            width: 100px;
            height: 100px;
        }

        .project-container img.main-project {
            height: 150px;
        }

        .project-container .project-icons img {
            width: 22px;
            height: 22px;
        }

        .project-container .project-icons {
            bottom: -10px;
        }
    }
    .card-inner {
        position: relative;
        width: 100%;
        height: 100%;
        transition: transform 0.6s;
        transform-style: preserve-3d;
    }

    .card:hover .card-inner {
        transform: rotateY(180deg);
    }

    .card-front,
    .card-back {
        position: absolute;
        width: 100%;
        height: 100%;
        backface-visibility: hidden;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 0.5rem;
        flex-direction: column;
    }

    .card-front {
    }

    .card-back {
        background: #4a4a4a;
        color: white;
        transform: rotateY(180deg);
    }

    /* */
    .project-container {
        position: relative;
        display: flex;
        flex-direction: column;
    }

    .project-container img.main-project {
        width: 100%;
        height: 250px;
        object-fit: cover;
        border-radius: 8px;
    }

    .project-container .project-icons {
        position: absolute;
        bottom: -35px;
        right: 5px;
        display: flex;
        gap: 5px;
    }

    .project-container .project-icons img {
        max-width: 42px;
        max-height: 42px;
        cursor: pointer;
        filter: grayscale();
    }
</style>
