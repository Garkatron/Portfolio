---
import Photo from "../components/Photo.astro";
import Icon from "../components/Icon.astro";
import facephoto from "../assets/photo.jpg";
import TechGrid from "../components/TechGrid.astro";
import PresentationCard from "../components/PresentationCard.astro";
import ProjectCard from "../components/ProjectCard.astro";
import ProjectGrid from "../components/ProjectGrid.astro";
import CarouselItem from "../components/CarouselItem.astro";
import Carousel from "../components/Carousel.astro";
import SkillProgress from "../components/SkillProgress.astro";
---

<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="generator" content={Astro.generator} />
		<link
			rel="stylesheet"
			href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
		/>
		<link
			rel="stylesheet"
			href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.min.css"
		/>
		<title>Matias</title>
	</head>
	<body>
		<!-- Section 1: Presentation -->
		<main id="section1" class="slice">
			<Photo src={facephoto} />

			<div class="section-content">
				<div
					style="display: flex; width: 100%; justify-content: center;"
				>
					<PresentationCard />
				</div>
				<section id="tech-stack">
					<h2 style="text-align: center;">Tech Stack</h2>
					<TechGrid title="Languages">
						<SkillProgress
							src="/icons/java-svgrepo-com.svg"
							progress="75"
							title="Java"
						/>
						<SkillProgress
							src="/icons/js-svgrepo-com.svg"
							progress="70"
							title="JavaScript"
						/>
						<SkillProgress
							src="/icons/kotlin-svgrepo-com.svg"
							progress="50"
							title="Kotlin"
						/>
						<SkillProgress
							src="/icons/rust-svgrepo-com.svg"
							progress="35"
							title="Rust"
							loading={true}
						/>
						<SkillProgress
							src="/icons/python-svgrepo-com.svg"
							progress="30"
							title="Python"
							loading={true}
						/>
					</TechGrid>
					<TechGrid title="Frameworks & Libraries">
						<SkillProgress
							src="/icons/bootstrap-4-logo-svgrepo-com.svg"
							progress="100"
							title="Bootstrap"
						/>
					</TechGrid>
					<TechGrid title="Tools">
						<SkillProgress
							src="/icons/git-svgrepo-com.svg"
							progress="100"
							title="Git"
						/>
						<SkillProgress
							src="/icons/postman-icon-svgrepo-com.svg"
							progress="100"
							title="Postman"
						/>
					</TechGrid>
					<TechGrid title="Other">
						<SkillProgress
							src="/icons/linux-svgrepo-com.svg"
							progress="65"
							title="Linux"
						/>
						<SkillProgress
							src="/icons/android-svgrepo-com.svg"
							progress="100"
							title="Android"
						/>
						<SkillProgress
							src="/icons/sql-database-generic-svgrepo-com.svg"
							progress="100"
							title="SQL Database"
						/>
					</TechGrid>
				</section>
			</div>
		</main>

		<!-- Section 2: Featured Projects -->
		<div id="section2" class="slice">
			<div class="section-content">
				<h2>Featured Projects</h2>
				<ProjectGrid>
					<ProjectCard
						title="3D Rasterizer in Rust"
						link="https://github.com/Garkatron/ScrapRenderer"
						description="A 2D rendering engine written in Rust, built to experiment with graphics and optimization."
						image="/images/renderer3d.png"
					/>
					<ProjectCard
						title="Rlox lang"
						description="A programming language based on jlox from Crafting Interpreters"
						link="https://github.com/Garkatron/Rust-Lox-Interpreter"
						image="https://db0dce98.delivery.rocketcdn.me/es/files/2024/08/Programacion_Procedural_DataScientest-1024x601.png"
					/>
					<ProjectCard
						title="Rust-Coded LRU"
						description="Rust LRU Cache"
						link="https://github.com/Garkatron/LRU-Cache-Rust"
						image="https://blog.orange.es/wp-content/uploads/sites/4/2023/04/memoria-cache-07.jpg"
					/>
				</ProjectGrid>
				<section>
					<h2>Other Projects</h2>
					<Carousel>
						<CarouselItem
							title="CHIP-8 Emulator"
							href="https://github.com/Garkatron/Von-Neumann-Simulator"
							image="/images/chip8image.png"
						>
							CHIP-8 Emulator implemented in Python
						</CarouselItem>
						<CarouselItem
							title="TerraX69"
							href="https://github.com/Garkatron/TerraX69-JS"
						>
							JavaScript game built with Tauri
						</CarouselItem>
						<CarouselItem
							title="PC Pokémon Web"
							href="https://garkatron.github.io/PC-PokeApi/"
							image="/images/pokeapi.png"
						>
							An interactive web app for exploring Pokémon data
							using the PokéAPI.
						</CarouselItem>
						<CarouselItem
							title="Von Neumann Simulator"
							href="https://github.com/Garkatron/Von-Neumann-Simulator"
							image="/images/vonneuman.png"
						>
							Von Neumann architecture simulator in Python
						</CarouselItem>
					</Carousel>
				</section>
			</div>
		</div>

		<!-- Section 3: Other Projects and Knowledge -->
		<div id="section3" class="slice">
			<div class="section-content">
				<section>
					<h2>Knowledge</h2>
					<h5>Resources and topics I've explored</h5>
					<Carousel reverse="true">
						<CarouselItem
							title="How Async Works"
							href="https://www.youtube.com/watch?v=eiC58R16hb8"
							image="/images/jsloop.gif"
						>
							Null
						</CarouselItem>
						<CarouselItem
							title="Crafting Interpreters"
							href="https://craftinginterpreters.com/"
							image="/images/craftinginterpreters.png"
						>
							Null
						</CarouselItem>
						<CarouselItem
							title="Million Dollar Error"
							href="https://medium.com/%40dilhan9g/the-billion-dollar-mistake-the-invention-of-null-1767465ee9e1"
							image="/images/nullptr.jpg"
						>
							Null
						</CarouselItem>
					</Carousel>
				</section>
			</div>
		</div>
	</body>
</html>

<style>
	#tech-stack {
		width: 100%;
	}

	.section-content {
		width: 100%;
		border-radius: 8px;
		padding: 2rem;
		background: transparent;
		position: relative; /* Ensure content is in a positioning context */
		z-index: 2; /* Above both background layers */
	}

	.slice {
		height: 100vh;
		position: relative; /* Ensure slice is in a positioning context */
		z-index: 2; /* Above both background layers */
	}

	body {
		background-color: #1b1b1b;
		background-image: url("/bg/olas4-2.svg");
		background-size: cover;
		background-repeat: no-repeat;
		background-position: center;
		position: relative;
	}

	body::before {
		content: "";
		position: absolute;
		top: 0;
		left: 0;
		width: 100%;
		height: 100%;
		background-image: url("/bg/topography.svg");
		background-repeat: repeat;
		background-size: 1000px;
		opacity: 0.25;
		z-index: -1;
		pointer-events: none;
	}

	html {
		background-color: transparent;
	}

	main {
		background: transparent;
		margin: 0;
		padding: 0;
		display: flex;
		flex-direction: row;
		justify-content: space-between;
		width: 100%;
		min-height: 100vh;
		position: relative;
		z-index: 2;
	}

	.left-info {
		width: 30%;
		flex-shrink: 0;
	}

	.right-info section h2 {
		color: #fff;
		margin-bottom: 0.5rem;
	}

	.right-info section h5 {
		color: #ccc;
		margin-bottom: 1rem;
	}

	.right-info {
		flex: 1;
		display: flex;
		flex-direction: column;
		padding: 2rem;
		box-sizing: border-box;
		align-items: center;
		border-left: 2px solid white;
		background-color: rgba(1, 4, 8, 0.379);
		position: relative;
		z-index: 2;
	}

	.right-info > section {
		width: 99%;
	}

	a {
		display: inline-block;
		outline: 0;
		text-align: center;
		cursor: pointer;
		min-width: 80px;
		height: 32px;
		color: rgb(255, 255, 255);
	}

	.project-section {
		display: flex;
		flex-direction: column;
		justify-content: center;
		align-items: center;
	}

	@media (max-width: 900px) {
		main {
			flex-direction: column;
		}
		.left-info {
			width: 100%;
		}
		.right-info {
			width: 100%;
			border-left: none;
		}
	}
</style>

<script is:inline>
	document.addEventListener("DOMContentLoaded", () => {
		document.querySelectorAll('a[href^="#"]').forEach((anchor) => {
			anchor.addEventListener("click", function (e) {
				e.preventDefault();
				const targetId = this.getAttribute("href");
				const targetElement = document.querySelector(targetId);
				if (targetElement) {
					targetElement.scrollIntoView({
						behavior: "instant",
						block: "start",
					});
				}
			});
		});

		let isScrolling = false;

		window.addEventListener(
			"wheel",
			(e) => {
				e.preventDefault();
				if (isScrolling) return;
				isScrolling = true;

				setTimeout(() => {
					isScrolling = false;
				}, 300);
				const sections = document.querySelectorAll(".slice");
				if (sections.length === 0) {
					console.warn(
						"No se encontraron elementos con la clase .section",
					);
					return;
				}

				let currentSection = 0;

				sections.forEach((section, index) => {
					const rect = section.getBoundingClientRect();
					if (
						rect.top <= window.innerHeight / 2 &&
						rect.bottom >= window.innerHeight / 2
					) {
						currentSection = index;
					}
				});

				if (e.deltaY > 0) {
					currentSection = Math.min(
						currentSection + 1,
						sections.length - 1,
					);
				} else {
					currentSection = Math.max(currentSection - 1, 0);
				}

				sections[currentSection].scrollIntoView({ behavior: "smooth" });
			},
			{ passive: false },
		);
	});

	window.addEventListener(
		"keydown",
		(e) => {
			if (["ArrowUp", "ArrowDown", "Space"].includes(e.code)) {
				e.preventDefault();
			}
		},
		{ passive: false },
	);
</script>
